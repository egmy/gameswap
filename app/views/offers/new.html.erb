<html>
    <head>
        <title>Make an Offer</title>
    </head>
    <body>
            <div class="container">
                <div class="row">
                    <div class="col">
                        <h1 style="text-align: center">New Offer</h1>
                    </div>
                </div>
                <div class="row ">
                    <div class="col-5">
                        <!-- Listing -->
                        <%= image_tag "covers/" + @listing.game.image, class: 'card-img-top' %>
                        <h2><%= @listing.game.title %></h2>
                        <p>Condition: <%= @listing.condition %></p>
                        <p><%= @listing.description %></p>
                    </div>
                    <div class="col-2" align="center">
                        <div class="row h-25"><!-- formatting --></div>
                        <div class="row">
                            <%# <div class="align-self-start"> %>
                                <%= image_tag "logos/logo1.png", class: 'card-img' %>
                            <%# </div> %>
                        </div>
                        <div class="row h-50"><!-- formatting --></div>
                        <div>
                            <div class="col">
                                <input type="submit" value="Create Offer" form="new_offer_form" %> <!-- submit button outside of form tags by id -->
                                <%= link_to "Cancel", game_path(Listing.find(params[:listing_id]).game_id), class: 'btn btn-secondary' %>
                            </div>
                        </div>
                    </div>
                    <div class="col-5">
                        <!-- Offer -->
                        <% if params[:game_id] %>
                            <%= image_tag "covers/" + Game.find(params[:game_id]).image, class: 'card-img-top' %>  <%# placeholder for dynamic image %>
                            <% offer_game_title = Game.find(params[:game_id]).title %> <%# single lookup %>
                        <% else %>
                            <div class="tab-content" id="nav-tabContent">
                                <% @all.each do |g| %>
                                    <div class="tab-pane" id="g<%= g.id.to_s %>" role="tabpanel" aria-labelledby="g<%= g.id.to_s %>-list"><%= image_tag "covers/" + g.image %></div>
                                <% end %>
                            </div>
                            <%#= image_tag "covers/NO_COVER.png", class: 'card-img-top' %>
                        <% end %>
                        <%= render "games/search_form" %>
                        <%= bootstrap_form_with id: "new_offer_form", model: @offer, url: offers_path, method: :post, data: { turbo: true } do |f| %> <%# probably a more streamlined way to use form fields outside of a block, but this works %>
                        <%= hidden_field_tag :title, offer_game_title %> <%# pass :title %> <!-- remove this line if uncommenting above -->
                        <%= link_to "Choose Game", games_index_path(:listing_id => params[:listing_id]), class: 'btn btn-primary rounded-pill mt-2' %>
                        <%= f.select :condition, %W(New #{"Used-Like New"} #{"Used-Very Good"} Used-Good Used-Acceptable) %>
                        <%= f.text_area :description, placeholder: "This game is in mint condition..." %>
                    </div>
                </div>
            </div>
        <% end %>
    </body>
</html>
